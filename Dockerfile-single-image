################################################################################
# neo4j
################################################################################

FROM neo4j:3.4.5

################################################################################
# Node.js and Yarn
################################################################################

RUN apk add --update --no-cache nodejs yarn

################################################################################
# Application sources
################################################################################

WORKDIR /usr/src/app

COPY package.json ./
COPY yarn.lock ./
RUN yarn install --production
COPY src src/

EXPOSE 3000

################################################################################
# Run application
################################################################################

WORKDIR /var/lib/neo4j
ENTRYPOINT [ "/bin/sh", "-c" ]
COPY start.sh /
CMD [ "/start.sh" ]
